{"version":3,"file":"nets-easy-for-woocommerce.min.js","mappings":"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","sources":["webpack://dibs-easy-for-woocommerce/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://dibs-easy-for-woocommerce/./assets/js/nets-easy-for-woocommerce.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","/**\n * @member wcDibsEasy\n *\n */\njQuery( function ( $ ) {\n    if ( typeof wcDibsEasy === \"undefined\" ) {\n        return false\n    }\n    /**\n     * The main object.\n     *\n     * @type {Object} dibsEasyForWoocommerce\n     */\n    const dibsEasyForWoocommerce = {\n        bodyEl: $( \"body\" ),\n        paymentMethodEl: $( 'input[name=\"payment_method\"]' ),\n        dibsCheckout: null,\n        blocked: false,\n        selectAnotherSelector: \"#dibs-easy-select-other\",\n        checkoutInitiated: wcDibsEasy.checkoutInitiated,\n        dibsOrderProcessing: false,\n        checkoutFormSelector: \"form.checkout\",\n        shippingSelector: \".woocommerce-checkout-review-order-table\",\n        standardWooFields: wcDibsEasy.standard_woo_checkout_fields,\n        wooTerms: \"form.checkout #terms\",\n\n        /**\n         * Initialize the gateway\n         */\n        init() {\n            $( document ).ready( dibsEasyForWoocommerce.loadDibs )\n            dibsEasyForWoocommerce.bodyEl.on(\n                \"click\",\n                dibsEasyForWoocommerce.selectAnotherSelector,\n                dibsEasyForWoocommerce.changeFromDibsEasy,\n            )\n        },\n\n        /**\n         * Check if DIBS Easy is the selected gateway.\n         */\n        dibsIsSelected() {\n            if ( dibsEasyForWoocommerce.paymentMethodEl.length > 0 ) {\n                dibsEasyForWoocommerce.paymentMethod = dibsEasyForWoocommerce.paymentMethodEl.filter( \":checked\" ).val()\n                if ( \"dibs_easy\" === dibsEasyForWoocommerce.paymentMethod ) {\n                    return true\n                }\n            }\n            return false\n        },\n        /**\n         * Triggers on document ready.\n         */\n        loadDibs() {\n            if ( dibsEasyForWoocommerce.dibsIsSelected() ) {\n                dibsEasyForWoocommerce.moveExtraCheckoutFields()\n                dibsEasyForWoocommerce.initDibsCheckout()\n                dibsEasyForWoocommerce.bodyEl.on( \"update_checkout\", dibsEasyForWoocommerce.updateCheckout )\n                dibsEasyForWoocommerce.bodyEl.on( \"updated_checkout\", dibsEasyForWoocommerce.updatedCheckout )\n            }\n        },\n\n        /**\n         * Triggers after a successful payment.\n         *\n         * @param {Object} response\n         */\n        paymentCompleted( response ) {\n            dibsEasyForWoocommerce.logToFile(\n                `Payment completed is triggered with payment id: ${ response.paymentId }`,\n            )\n            const redirectUrl = sessionStorage.getItem( \"redirectNets\" )\n            if ( redirectUrl ) {\n                window.location.href = redirectUrl\n            }\n        },\n\n        /**\n         *  Display login error\n         *\n         * @param {string} message\n         */\n        displayMustLoginError( message ) {\n            const mustLoginClass = \"woocommerce-NoticeGroupwoocommerce-NoticeGroup-updateOrderReview\"\n            const mustLoginNotice = `<div class=\"${ mustLoginClass }\">\n\t\t\t\t<ul class=\"woocommerce-error\" role=\"alert\">\n\t\t\t\t\t<li>${ message }</li>\n\t\t\t\t</ul>\n\t\t\t</div>`\n            dibsEasyForWoocommerce.checkoutFormSelector.prepend( mustLoginNotice )\n        },\n        /**\n         * Update WC form if needed\n         *\n         * @param {Object} data\n         */\n        updateAddress( data ) {\n            if ( \"yes\" === data.updateNeeded ) {\n                $( \"#billing_country\" ).val( data.country )\n                $( \"#shipping_country\" ).val( data.country )\n                $( \"#billing_postcode\" ).val( data.postCode )\n                $( \"#shipping_postcode\" ).val( data.postCode )\n            }\n\n            if ( \"yes\" === data.mustLogin ) {\n                // Customer might need to log in. Inform customer and freeze DIBS checkout.\n                dibsEasyForWoocommerce.displayMustLoginError( data.mustLoginMessage )\n                dibsEasyForWoocommerce.dibsCheckout.freezeCheckout()\n\n                const etop = dibsEasyForWoocommerce.checkoutFormSelector.offset().top\n                $( \"html, body\" ).animate(\n                    {\n                        scrollTop: etop,\n                    },\n                    1000,\n                )\n            } else {\n                // All good release checkout and trigger update_checkout event\n                dibsEasyForWoocommerce.dibsCheckout.thawCheckout()\n                $( document.body ).trigger( \"update_checkout\" )\n            }\n        },\n\n        updateCheckout() {\n            console.log( \"update_checkout\" )\n            if ( window.Dibs !== undefined ) {\n                // lock iframe\n                dibsEasyForWoocommerce.dibsCheckout.freezeCheckout()\n            }\n        },\n        updatedCheckout() {\n            console.log( \"updated_checkout\" )\n            if ( window.Dibs !== undefined ) {\n                // unlock iframe\n                dibsEasyForWoocommerce.dibsCheckout.thawCheckout()\n                $( \"#dibs-order-review\" ).unblock()\n            }\n        },\n        /**\n         * Triggers whenever customer updates address information\n         *\n         * @param {Object} address\n         */\n        addressChanged( address ) {\n            dibsEasyForWoocommerce.logToFile( \"Address changed is triggered.\" )\n            if ( address ) {\n                console.log( \"address-changed\" )\n                console.log( address )\n                $.ajax( {\n                    type: \"POST\",\n                    dataType: \"json\",\n                    async: true,\n                    url: wcDibsEasy.customer_address_updated_url,\n                    data: {\n                        action: \"customer_address_updated\",\n                        address,\n                        nonce: wcDibsEasy.nets_checkout_nonce,\n                    },\n                    success( response ) {},\n                    error( response ) {},\n                    complete( response ) {\n                        console.log( \"COMPLETED\" )\n                        console.log( \"customer_address_updated \" )\n                        console.log( response.responseJSON.data )\n                        dibsEasyForWoocommerce.updateAddress( response.responseJSON.data )\n                        // Scroll to top if\n                        if ( wcDibsEasy.isMobile ) {\n                            $( \"html, body\" ).animate(\n                                {\n                                    scrollTop: $( wcDibsEasy.shippingSelector ).offset().top - 10,\n                                },\n                                1000,\n                            )\n                        }\n                    },\n                } )\n            }\n        },\n        /**\n         * Triggers whenever customer updates address information from ApplePay window.\n         *\n         */\n        applePayAddressChanged( address ) {\n            console.log( \"applepay-contact-updated\", address )\n            dibsEasyForWoocommerce.logToFile( \"ApplePay address changed is triggered.\" )\n            if ( address ) {\n                console.log( \"applepay-contact-updated\" )\n                $.ajax( {\n                    type: \"POST\",\n                    dataType: \"json\",\n                    async: true,\n                    url: wcDibsEasy.customer_address_updated_url,\n                    data: {\n                        action: \"customer_address_updated\",\n                        address,\n                        nonce: wcDibsEasy.nets_checkout_nonce,\n                    },\n                    success( response ) {},\n                    error( response ) {},\n                    complete( response ) {\n                        console.log( \"COMPLETED\" )\n                        console.log( \"customer_address_updated \" )\n                        console.log( response.responseJSON.data )\n                        dibsEasyForWoocommerce.updateAddress( response.responseJSON.data )\n                        dibsEasyForWoocommerce.dibsCheckout.completeApplePayShippingContactUpdate(\n                            response.responseJSON.data.cart_total,\n                        )\n                    },\n                } )\n            }\n        },\n        /**\n         * Init Dibs Easy Checkout\n         */\n        initDibsCheckout() {\n            // Constructs a new Checkout object.\n            dibsEasyForWoocommerce.dibsCheckout = new Dibs.Checkout( {\n                checkoutKey: wcDibsEasy.privateKey,\n                paymentId: wcDibsEasy.dibs_payment_id,\n                containerId: \"dibs-complete-checkout\",\n                language: wcDibsEasy.locale,\n            } )\n            dibsEasyForWoocommerce.dibsCheckout.on( \"pay-initialized\", dibsEasyForWoocommerce.getDibsEasyOrder )\n            dibsEasyForWoocommerce.dibsCheckout.on( \"payment-completed\", dibsEasyForWoocommerce.paymentCompleted )\n            dibsEasyForWoocommerce.dibsCheckout.on( \"address-changed\", dibsEasyForWoocommerce.addressChanged )\n            dibsEasyForWoocommerce.dibsCheckout.on(\n                \"applepay-contact-updated\",\n                dibsEasyForWoocommerce.applePayAddressChanged,\n            )\n        },\n        /**\n         * Triggers when customer clicks the pay button.\n         * Gets the Nets Easy order and starts the order submission\n         *\n         * @param {string} paymentId\n         */\n        getDibsEasyOrder( paymentId ) {\n            dibsEasyForWoocommerce.dibsOrderProcessing = true\n            dibsEasyForWoocommerce.logToFile( `Pay initialized is triggered with payment id: ${ paymentId }` )\n            $( document.body ).trigger( \"dibs_pay_initialized\" )\n            $.ajax( {\n                type: \"POST\",\n                dataType: \"json\",\n                async: true,\n                url: wcDibsEasy.get_order_data_url,\n                data: {\n                    action: \"payment_success\",\n                    paymentId,\n                    nonce: wcDibsEasy.nets_checkout_nonce,\n                },\n                success( data ) {\n                    console.log( data )\n                    if ( false === data.success ) {\n                        console.log( \"PaymentID already exist in order\" )\n                        console.log( data )\n                        dibsEasyForWoocommerce.failOrder(\n                            \"ajax-error\",\n                            '<div class=\"woocommerce-error\">' + data.data + \"</div>\",\n                        )\n                        if ( data.data.redirect ) {\n                            window.location.href = data.data.redirect\n                        }\n                    } else {\n                        dibsEasyForWoocommerce.setAddressData( data )\n                    }\n                },\n                error( data ) {\n                    console.log( data, \"error_data\" )\n                },\n                complete( data ) {},\n            } )\n        },\n        /**\n         * Sets the customer data.\n         *\n         * @param {Object} data\n         */\n        setAddressData( data ) {\n            dibsEasyForWoocommerce.logToFile( 'Received \"customer data\" from Nets Easy' )\n            const consumer = data.data.payment.consumer\n            const { billingAddress, shippingAddress } = consumer\n\n            // billingAddress have country with 3 letters.\n\n            // check do we have data\n            const hasBillingData = typeof billingAddress === \"object\" && ! Array.isArray( billingAddress )\n            // Use shipping data if billing data do not exist.\n            $( \"#billing_address_1\" ).val( hasBillingData ? billingAddress.addressLine1 : shippingAddress.addressLine1 )\n            $( \"#billing_postcode\" ).val( hasBillingData ? billingAddress.postalCode : shippingAddress.postalCode )\n            $( \"#billing_city\" ).val( hasBillingData ? billingAddress.city : shippingAddress.city )\n            $( \"#billing_country\" ).val( shippingAddress.country )\n\n            $( \"#shipping_address_1\" ).val( shippingAddress.addressLine1 )\n            $( \"#shipping_postcode\" ).val( shippingAddress.postalCode )\n            $( \"#shipping_city\" ).val( shippingAddress.city )\n            $( \"#shipping_country\" ).val( shippingAddress.country )\n\n            if ( consumer.company.hasOwnProperty( \"name\" ) ) {\n                // B2B purchase\n                const company = consumer.company\n                const { firstName, lastName, email, phoneNumber } = company.contactDetails\n                const { prefix, number } = phoneNumber\n                $( \"#billing_company\" ).val( company.name )\n                $( \"#shipping_company\" ).val( company.name )\n                $( \"#billing_first_name\" ).val( firstName )\n                $( \"#billing_last_name\" ).val( lastName )\n                $( \"#shipping_first_name\" ).val( firstName )\n                $( \"#shipping_last_name\" ).val( lastName )\n                $( \"#billing_email\" ).val( email )\n                $( \"#billing_phone\" ).val( `${ prefix }${ number }` )\n                // trigger events for 3rd part plugins.\n                $( \"#billing_country\" ).change()\n                $( \"#billing_email\" ).change()\n                $( \"#billing_email\" ).blur()\n            } else {\n                // B2C purchase\n                const { firstName, lastName, email, phoneNumber } = consumer.privatePerson\n                const { prefix, number } = phoneNumber\n                $( \"#billing_company\" ).val( \"\" )\n                $( \"#shipping_company\" ).val( \"\" )\n                $( \"#billing_first_name\" ).val( firstName )\n                $( \"#billing_last_name\" ).val( lastName )\n                $( \"#shipping_first_name\" ).val( firstName )\n                $( \"#shipping_last_name\" ).val( lastName )\n                $( \"#billing_email\" ).val( email )\n                // trigger events for 3rd part plugins.\n                $( \"#billing_email\" ).change()\n                $( \"#billing_email\" ).blur()\n                $( \"#billing_phone\" ).val( `${ prefix }${ number }` )\n            }\n\n            // eslint-disable-next-line eqeqeq\n            if ( shippingAddress.addressLine2 != null ) {\n                $( \"#billing_address_2\" ).val( shippingAddress.addressLine2 )\n                $( \"#shipping_address_2\" ).val( shippingAddress.addressLine2 )\n            }\n\n            // Check Terms checkbox, if it exists\n            if ( $( dibsEasyForWoocommerce.wooTerms ).length > 0 ) {\n                $( dibsEasyForWoocommerce.wooTerms ).prop( \"checked\", true )\n            }\n            $( \"input#ship-to-different-address-checkbox\" ).prop( \"checked\", true )\n            dibsEasyForWoocommerce.submitOrder()\n        },\n        /**\n         * Submit the order using the WooCommerce AJAX function.\n         */\n        submitOrder() {\n            $( \".woocommerce-checkout-review-order-table\" ).block( {\n                message: null,\n                overlayCSS: {\n                    background: \"#fff\",\n                    opacity: 0.6,\n                },\n            } )\n            $.ajax( {\n                type: \"POST\",\n                url: wcDibsEasy.submitOrder,\n                data: $( \"form.checkout\" ).serialize(),\n                dataType: \"json\",\n                success( data ) {\n                    try {\n                        if ( \"success\" === data.result ) {\n                            dibsEasyForWoocommerce.logToFile( \"Successfully placed order.\" )\n                            window.sessionStorage.setItem( \"redirectNets\", data.redirect )\n                            dibsEasyForWoocommerce.dibsCheckout.send( \"payment-order-finalized\", true )\n                        } else {\n                            throw \"Result failed\"\n                        }\n                    } catch ( err ) {\n                        if ( data.messages ) {\n                            dibsEasyForWoocommerce.logToFile( \"Checkout error | \" + data.messages )\n                            dibsEasyForWoocommerce.failOrder( \"submission\", data.messages )\n                        } else {\n                            dibsEasyForWoocommerce.logToFile( \"Checkout error | No message\" )\n                            dibsEasyForWoocommerce.failOrder(\n                                \"submission\",\n                                '<div class=\"woocommerce-error\">' + \"Checkout error\" + \"</div>\",\n                            )\n                        }\n                    }\n                },\n                error( data ) {\n                    try {\n                        dibsEasyForWoocommerce.logToFile( \"AJAX error | \" + JSON.stringify( data ) )\n                    } catch ( e ) {\n                        dibsEasyForWoocommerce.logToFile( \"AJAX error | Failed to parse error message.\" )\n                    }\n                    dibsEasyForWoocommerce.failOrder(\n                        \"ajax-error\",\n                        '<div class=\"woocommerce-error\">Internal Server Error</div>',\n                    )\n                },\n            } )\n        },\n        /**\n         * When the customer changes from Dibs Easy to other payment methods.\n         *\n         * @param {Event} e\n         */\n        changeFromDibsEasy( e ) {\n            e.preventDefault()\n            $( dibsEasyForWoocommerce.checkoutFormSelector ).block( {\n                message: null,\n                overlayCSS: {\n                    background: \"#fff\",\n                    opacity: 0.6,\n                },\n            } )\n            $.ajax( {\n                type: \"POST\",\n                dataType: \"json\",\n                async: true,\n                url: wcDibsEasy.change_payment_method_url,\n                data: {\n                    action: \"dibs_change_payment_method\",\n                    dibs_easy: false,\n                    nonce: wcDibsEasy.nets_checkout_nonce,\n                },\n                success( data ) {},\n                error( data ) {},\n                complete( data ) {\n                    console.log( \"Change payment method success\" )\n                    console.log( data.responseJSON.data.redirect )\n                    dibsEasyForWoocommerce.bodyEl.removeClass( \"dibs-selected\" )\n                    window.location.href = data.responseJSON.data.redirect\n                },\n            } )\n        },\n        /**\n         * Moves all non-standard fields to the extra checkout fields.\n         */\n        moveExtraCheckoutFields() {\n            // Move order comments.\n            $( \".woocommerce-additional-fields\" ).appendTo( \"#dibs-extra-checkout-fields\" )\n\n            const form = $( 'form[name=\"checkout\"] input, form[name=\"checkout\"] select, textarea' )\n            for ( let i = 0; i < form.length; i++ ) {\n                const name = form[ i ].name\n                const fields = dibsEasyForWoocommerce.standardWooFields\n                // Check if this is a standard field.\n                if ( $.inArray( name, fields ) === -1 ) {\n                    // This is not a standard Woo field, move to our div.\n                    $( \"p#\" + name + \"_field\" ).appendTo( \"#dibs-extra-checkout-fields\" )\n                }\n            }\n        },\n        /**\n         * Logs the message to the Dibs Easy log in WooCommerce.\n         *\n         * @param {string} message\n         */\n        logToFile( message ) {\n            $.ajax( {\n                url: wcDibsEasy.log_to_file_url,\n                type: \"POST\",\n                dataType: \"json\",\n                data: {\n                    message,\n                    nonce: wcDibsEasy.log_to_file_nonce,\n                },\n            } )\n        },\n        /**\n         * Fails the order with Dibs Easy on a checkout error and timeout.\n         *\n         * @param {string} event\n         * @param {string} errorMessage\n         */\n        failOrder( event, errorMessage ) {\n            const errorClasses = \"woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout\"\n            const errorWrapper = `<div class=\"${ errorClasses }\">${ errorMessage }</div>`\n\n            // Send false and cancel\n            dibsEasyForWoocommerce.dibsCheckout.send( \"payment-order-finalized\", false )\n            // Reenable the form.\n            dibsEasyForWoocommerce.bodyEl.trigger( \"updated_checkout\" )\n            $( dibsEasyForWoocommerce.checkoutFormSelector ).removeClass( \"processing\" )\n            // $( dibsEasyForWoocommerce.checkoutFormSelector ).unblock();\n            // $( '.woocommerce-checkout-review-order-table' ).unblock();\n\n            // Print error messages, and trigger checkout_error, and scroll to notices.\n            $( \".woocommerce-NoticeGroup-checkout,\" + \".woocommerce-error,\" + \".woocommerce-message\" ).remove()\n\n            $( dibsEasyForWoocommerce.checkoutFormSelector ).prepend( errorWrapper )\n            // $( dibsEasyForWoocommerce.checkoutFormSelector )\n            // \t.removeClass( 'processing' )\n            // \t.unblock();\n            $( dibsEasyForWoocommerce.checkoutFormSelector )\n                .find( \".input-text, select, input:checkbox\" )\n                .trigger( \"validate\" )\n                .blur()\n            $( document.body ).trigger( \"checkout_error\", [ errorMessage ] )\n            $( \"html, body\" ).animate(\n                {\n                    scrollTop: $( dibsEasyForWoocommerce.checkoutFormSelector ).offset().top - 100,\n                },\n                1000,\n            )\n        },\n    }\n\n    dibsEasyForWoocommerce.init()\n} )\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","jQuery","$","wcDibsEasy","dibsEasyForWoocommerce","bodyEl","paymentMethodEl","dibsCheckout","blocked","selectAnotherSelector","checkoutInitiated","dibsOrderProcessing","checkoutFormSelector","shippingSelector","standardWooFields","standard_woo_checkout_fields","wooTerms","init","document","ready","loadDibs","on","changeFromDibsEasy","dibsIsSelected","length","paymentMethod","filter","val","moveExtraCheckoutFields","initDibsCheckout","updateCheckout","updatedCheckout","paymentCompleted","response","logToFile","concat","paymentId","redirectUrl","sessionStorage","getItem","window","location","href","displayMustLoginError","message","mustLoginNotice","prepend","updateAddress","data","updateNeeded","country","postCode","mustLogin","mustLoginMessage","freezeCheckout","etop","offset","top","animate","scrollTop","thawCheckout","body","trigger","console","log","undefined","Dibs","unblock","addressChanged","address","ajax","type","dataType","async","url","customer_address_updated_url","action","nonce","nets_checkout_nonce","success","error","complete","responseJSON","isMobile","applePayAddressChanged","completeApplePayShippingContactUpdate","cart_total","Checkout","checkoutKey","privateKey","dibs_payment_id","containerId","language","locale","getDibsEasyOrder","get_order_data_url","failOrder","redirect","setAddressData","consumer","payment","billingAddress","shippingAddress","hasBillingData","Array","isArray","addressLine1","postalCode","city","company","hasOwnProperty","_company$contactDetai","contactDetails","firstName","lastName","email","phoneNumber","prefix","number","name","change","blur","_consumer$privatePers","privatePerson","addressLine2","prop","submitOrder","block","overlayCSS","background","opacity","serialize","result","setItem","send","err","messages","JSON","stringify","e","preventDefault","change_payment_method_url","dibs_easy","removeClass","appendTo","form","i","fields","inArray","log_to_file_url","log_to_file_nonce","event","errorMessage","errorWrapper","remove","find"],"sourceRoot":""}